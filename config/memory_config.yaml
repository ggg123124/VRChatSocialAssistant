# 记忆与检索模块配置文件

storage:
  # 好友档案存储目录
  profiles_dir: "data/profiles"
  # 对话数据库路径
  conversations_db: "data/conversations/conversations.db"
  # 向量数据库目录
  vector_db_dir: "data/vector_db"
  # 备份目录
  backup_dir: "data/backups"
  # 是否启用加密
  enable_encryption: false

embedding:
  # 嵌入模型名称
  model_name: "BAAI/bge-m3"
  # 模型本地路径
  model_path: "models/embeddings/bge-m3"
  # 运行设备（cuda/cpu）
  device: "cpu"
  # 批处理大小
  batch_size: 32
  # 文本最大长度
  max_length: 512
  # 首次运行是否自动下载模型
  auto_download: true
  # 下载镜像源（huggingface/modelscope）
  download_mirror: "modelscope"

vector_db:
  # 向量库后端（chroma/faiss）
  backend: "chroma"
  # 持久化间隔（秒）
  persist_interval: 300
  # 向量维度（自动从模型获取）
  dimension: null

retrieval:
  # 默认检索数量
  default_top_k: 5
  # 相似度阈值
  similarity_threshold: 0.6
  # 时间衰减系数
  time_decay_lambda: 0.1
  # 是否启用时间衰减
  enable_time_decay: true
  # 默认检索策略（semantic/hybrid/keyword）
  default_strategy: "semantic"

cleanup:
  # 对话保留天数
  retention_days: 30
  # 摘要保留天数
  summary_retention_days: 90
  # 是否自动清理
  auto_cleanup_enabled: true
  # 清理间隔（小时）
  cleanup_interval_hours: 24

cache:
  # 是否启用档案缓存
  enable_profile_cache: true
  # 最大缓存数量
  max_cache_size: 100
  # 是否缓存嵌入向量
  embedding_cache_enabled: false
